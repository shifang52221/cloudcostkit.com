---
import GuideLayout from "../../layouts/GuideLayout.astro";

const title = "Estimate CloudWatch custom metrics (time series count)";
const description =
  "How to estimate CloudWatch custom metric volume for cost models: count unique time series (metric name * dimension combinations), model high-cardinality dimensions, and validate with inventory methods.";
---
<GuideLayout
  title={title}
  description={description}
  canonicalPath="/guides/aws-cloudwatch-metrics-estimate-custom-metrics"
  lastUpdated="2026-01-27"
  faqs={[
    {
      q: "What is the right unit to estimate for custom metrics?",
      a: "Time series (unique metric + dimension combination). Cost often scales with how many unique series you emit, not how many datapoints you write.",
    },
    {
      q: "What causes custom metric estimates to be wrong?",
      a: "High-cardinality dimensions (podId, tenantId, userId), copying metrics across environments, and multiple agents exporting the same metrics under different names.",
    },
  ]}
>
  <p>
    For CloudWatch custom metrics, the key planning input is the number of <strong>unique time series</strong>. A time
    series is typically one metric name plus one specific set of dimension values. If you add a dimension that has many
    unique values, you multiply your series count quickly.
  </p>

  <h2>Step 0: the basic formula</h2>
  <p class="muted">Time series ~= metric names * unique dimension combinations * environments</p>
  <ul>
    <li>If a metric has no dimensions, each metric name is usually one series per environment.</li>
    <li>If a metric has dimensions (service, region, statusCode, etc.), each combination becomes a separate series.</li>
  </ul>

  <h2>Step 1: inventory where custom metrics come from</h2>
  <ul>
    <li>
      <strong>App instrumentation</strong>: custom business and service metrics you emit (latency, error rate, queue lag).
    </li>
    <li>
      <strong>Agents</strong>: exporters (Kubernetes/EC2 agents) that emit per-node/pod/container metrics.
    </li>
    <li>
      <strong>Log-based metrics</strong>: metric filters that turn log patterns into metrics.
    </li>
  </ul>

  <h2>Step 2: identify "multipliers" (the cardinality drivers)</h2>
  <ul>
    <li>
      <strong>Per instance/pod</strong>: instanceId, podName, containerId -> series scale with fleet size.
    </li>
    <li>
      <strong>Per tenant/customer</strong>: tenantId/customerId -> series scale with customer growth.
    </li>
    <li>
      <strong>Per endpoint</strong>: path/method -> series scale with API surface area.
    </li>
    <li>
      <strong>Per region/AZ</strong>: region/az -> series multiply across deployment topology.
    </li>
  </ul>
  <p class="muted">
    If a dimension is unbounded (new values keep appearing), treat it as a risk and model a growth scenario.
  </p>

  <h2>Three practical estimation methods</h2>
  <ul>
    <li>
      <strong>From instrumentation config</strong>: count metric names and dimension sets in your code or monitoring-as-code templates.
    </li>
    <li>
      <strong>From agent inventory</strong>: estimate per-node/per-pod metric series and multiply by average fleet size.
    </li>
    <li>
      <strong>From CloudWatch inventory</strong>: count active time series by namespace and dimension keys from a representative week.
    </li>
  </ul>

  <h2>Worked example (why dimensions matter)</h2>
  <ul>
    <li>Metric: <code>http_requests</code> with dimensions service and status</li>
    <li>Services: 12, statuses: 5 -> combinations: 60</li>
    <li>Environments: prod + staging -> 120 series</li>
    <li>If you add a tenantId dimension with 1,000 tenants -> 120,000 series</li>
  </ul>
  <p class="muted">This is why "one extra dimension" can dominate the entire CloudWatch bill.</p>

  <h2>Turn series into cost</h2>
  <div class="btn-row">
    <a class="btn" href="/calculators/metrics-timeseries-cost-calculator/">Time series cost</a>
    <a class="btn" href="/calculators/cloudwatch-metrics-cost-calculator/">CloudWatch metrics cost</a>
  </div>

  <h2>Validation checklist</h2>
  <ul>
    <li>List the top namespaces and the top dimensions used (those explain most series).</li>
    <li>Model baseline vs busy month (fleet size and tenant growth scenarios).</li>
    <li>Confirm you don't have duplicated exporters emitting equivalent series.</li>
    <li>Once deployed, compare estimate vs measured active series from a real week.</li>
  </ul>

  <h2>Sources</h2>
  <ul>
    <li>
      CloudWatch pricing:{" "}
      <a href="https://aws.amazon.com/cloudwatch/pricing/" rel="nofollow noopener" target="_blank">
        aws.amazon.com/cloudwatch/pricing
      </a>
    </li>
  </ul>
</GuideLayout>

