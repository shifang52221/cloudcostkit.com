---
import GuideLayout from "../../layouts/GuideLayout.astro";

const title = "Estimate ECR storage (GB-month) from images and retention";
const description =
  "How to estimate container registry storage cost: average image size, push frequency, retention window, multi-arch duplication, and a workflow to validate your estimate.";
---
<GuideLayout
  title={title}
  description={description}
  canonicalPath="/guides/aws-ecr-estimate-storage-gb-month"
  lastUpdated="2026-01-27"
  faqs={[
    {
      q: "What is GB-month?",
      a: "GB-month is average stored gigabytes over the month. If you store 1,000 GB all month, that's 1,000 GB-month.",
    },
    {
      q: "Why do registry costs grow over time?",
      a: "Because teams keep every tag forever and rebuild images frequently. Without retention policies, old images accumulate even if nobody pulls them.",
    },
  ]}
>
  <p>
    Registry storage cost is usually driven by how many images you keep and how large they are. You can get a good
    estimate with a simple model (average size × images retained), then refine it using push frequency and retention
    windows.
  </p>

  <h2>Step 1: define repo classes (do not use one average)</h2>
  <ul>
    <li>
      <strong>CI artifacts</strong>: many tags/day, short retention (should be cheap if retention works).
    </li>
    <li>
      <strong>Releases</strong>: fewer tags, longer retention (rollback needs).
    </li>
    <li>
      <strong>Base images</strong>: few images but large and shared across many services.
    </li>
  </ul>

  <h2>Fast model (good for budgeting)</h2>
  <ul>
    <li>
      <strong>Stored GB-month ~= avg image size (GB) × retained images (count)</strong>
    </li>
    <li>
      Retained images per repo ~= tags retained × (variants per tag)
    </li>
    <li>
      If you store multi-arch variants separately, variants per tag can be 2 (amd64 + arm64) or more.
    </li>
  </ul>

  <h2>Better model (push frequency + retention days)</h2>
  <p class="muted">This model is useful for repos where CI pushes constantly.</p>
  <ul>
    <li>Pushes/day = N</li>
    <li>Retention days = D</li>
    <li>Retained images ~= N × D (per repo or repo class)</li>
    <li>Stored GB ~= retained images × avg image size</li>
  </ul>

  <h2>Worked example</h2>
  <ul>
    <li>Avg image size: 0.8 GB</li>
    <li>CI pushes: 40 images/day</li>
    <li>Retention: 14 days</li>
    <li>Retained images ~= 40 × 14 = 560 images</li>
    <li>Stored GB ~= 560 × 0.8 ~= 448 GB-month (order-of-magnitude)</li>
  </ul>

  <h2>Common multipliers (what makes storage explode)</h2>
  <ul>
    <li><strong>No retention</strong>: “keep forever” means storage grows without bound.</li>
    <li><strong>Multi-arch</strong>: storing multiple variants can multiply retained GB.</li>
    <li><strong>Large base images</strong>: shared images can dominate storage even if app images are small.</li>
    <li><strong>Environment duplication</strong>: separate repos/tags for prod/staging/dev with independent retention.</li>
  </ul>

  <h2>What to measure first (so your estimate converges)</h2>
  <ul>
    <li>Average image size by repo class (CI vs release vs base images).</li>
    <li>Push frequency per repo (images/day) for the top 10 repos by activity.</li>
    <li>Retention rules (days or tags) and whether untagged images are deleted.</li>
    <li>Whether multi-arch variants are retained equally (amd64 + arm64 doubles storage if both are kept).</li>
  </ul>

  <h2>Turn storage into cost</h2>
  <p>
    Use <a href="/calculators/aws-ecr-cost-calculator/">AWS ECR Cost Calculator</a> with your stored GB-month estimate and
    your effective $/GB-month.
  </p>

  <h2>Validation checklist</h2>
  <ul>
    <li>Pick 3 representative repos and measure average image size and retained tags.</li>
    <li>Validate retention policies actually delete old tags (and untagged images).</li>
    <li>Validate multi-arch behavior (are variants stored separately and retained equally?).</li>
    <li>After changes, compare predicted GB-month to registry-reported storage.</li>
  </ul>

  <h2>Sources</h2>
  <ul>
    <li>
      ECR pricing:{" "}
      <a href="https://aws.amazon.com/ecr/pricing/" rel="nofollow noopener" target="_blank">
        aws.amazon.com/ecr/pricing
      </a>
    </li>
    <li>
      ECR lifecycle policies:{" "}
      <a
        href="https://docs.aws.amazon.com/AmazonECR/latest/userguide/lifecycle-policies.html"
        rel="nofollow noopener"
        target="_blank"
      >
        docs.aws.amazon.com
      </a>
    </li>
  </ul>
</GuideLayout>
