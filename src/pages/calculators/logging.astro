---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { SITE } from "../../config/site";
import { TOOLS } from "../../lib/tools";
import AdSlot from "../../components/AdSlot.astro";

const title = `Logging calculators | ${SITE.name}`;
const description =
  "Logging and observability cost calculators for ingestion, retention storage, query/scan, metrics series, and CloudWatch-style line items.";
const slots = SITE.adsenseSlots;

const tools = TOOLS.filter((t) => t.category === "Logging");
---
<BaseLayout title={title} description={description} canonicalPath="/calculators/logging">
  <section class="card hero">
    <h1>Logging calculators</h1>
    <p>Model ingestion + retention first, then add query/scan and metrics cardinality where it matters.</p>
    <div class="btn-row" style="margin-top:12px">
      <a class="btn" href="/calculators/">All calculators</a>
      <a class="btn" href="/guides/log-costs/">Guide: log costs</a>
      <a class="btn" href="/guides/metrics-costs/">Guide: metrics costs</a>
      <a class="btn" href="/methodology/">Methodology</a>
    </div>
  </section>

  <section class="grid" style="margin-top:18px">
    <section class="card section prose col-6">
      <h2 style="margin-top:0">A practical model</h2>
      <ol class="muted" style="margin:10px 0 0; padding-left:18px">
        <li>Estimate GB/day ingested and retention days.</li>
        <li>Convert to GB-month stored and apply $/GB-month.</li>
        <li>Add scan/query cost if you run frequent or wide queries.</li>
        <li>For metrics, model active series (cardinality) and retention.</li>
      </ol>
    </section>
    <section class="card section prose col-6">
      <h2 style="margin-top:0">What spikes bills</h2>
      <ul class="muted" style="margin:10px 0 0; padding-left:18px">
        <li>High-cardinality labels (metrics) and noisy debug logs.</li>
        <li>Wide queries that scan large time ranges or many log streams.</li>
        <li>Incident retries that multiply log volume without increasing useful signal.</li>
      </ul>
    </section>
  </section>

  <section class="card section prose" style="margin-top:18px">
    <h2 style="margin-top:0">How to get your inputs</h2>
    <ul class="muted" style="margin:10px 0 0; padding-left:18px">
      <li><strong>Ingestion GB/day</strong>: use log platform metrics or billing exports by log group.</li>
      <li><strong>Retention days</strong>: check policies for each log group or bucket.</li>
      <li><strong>Scan GB</strong>: query history or dashboards (range length x data scanned).</li>
      <li><strong>Metrics series</strong>: active series counts and cardinality reports.</li>
    </ul>
  </section>

  <section class="card section" style="margin-top:18px">
    <div class="muted" style="font-size:13px; margin-bottom:10px">{tools.length} logging tools</div>
    <div class="grid">
      {tools.map((t) => (
        <a class="card2 tool col-6" href={`/calculators/${t.slug}/`}>
          <div class="tool-title">{t.title}</div>
          <div class="tool-desc">{t.description}</div>
        </a>
      ))}
    </div>
  </section>

  <section class="card section prose" style="margin-top:18px">
    <h2 style="margin-top:0">Result interpretation</h2>
    <ul class="muted" style="margin:10px 0 0; padding-left:18px">
      <li>If ingestion dominates, focus on log volume controls before tuning pricing tiers.</li>
      <li>If query costs dominate, add guardrails: shorter ranges, fewer streams, and sampled queries.</li>
      <li>Retention changes often have a bigger impact than storage class tweaks.</li>
      <li>Use a peak scenario; incident bursts and retries are the real cost multipliers.</li>
    </ul>
  </section>

  <section class="card section prose" style="margin-top:18px">
    <h2 style="margin-top:0">Scenario planning</h2>
    <ul class="muted" style="margin:10px 0 0; padding-left:18px">
      <li>Baseline: average GB/day ingested and normal query frequency.</li>
      <li>Peak: 2x-3x ingestion for incident months and wider query windows.</li>
      <li>Retention shift: model shorter retention as a separate scenario.</li>
      <li>Cardinality growth: add a growth rate for metrics series counts.</li>
    </ul>
  </section>

  <section class="card section prose" style="margin-top:18px">
    <h2 style="margin-top:0">Validate after changes</h2>
    <ul class="muted" style="margin:10px 0 0; padding-left:18px">
      <li>Compare ingestion GB/day to billing usage types after policy changes.</li>
      <li>Check retention policies for each log group or bucket.</li>
      <li>Review query scan volume after dashboard or alert updates.</li>
    </ul>
  </section>

  <section class="section">
    <AdSlot slot={slots.calculatorsListMid} minHeight={280} />
  </section>
</BaseLayout>
