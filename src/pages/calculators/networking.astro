---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { SITE } from "../../config/site";
import { TOOLS } from "../../lib/tools";
import AdSlot from "../../components/AdSlot.astro";

const title = `Networking calculators | ${SITE.name}`;
const description =
  "Networking cost calculators for egress, transfer boundaries (cross-region, cross-AZ), NAT vs endpoints, and CDN edge vs origin egress.";
const slots = SITE.adsenseSlots;

const tools = TOOLS.filter((t) => t.category === "Networking");
---
<BaseLayout title={title} description={description} canonicalPath="/calculators/networking">
  <section class="card hero">
    <h1>Networking calculators</h1>
    <p>Model networking costs by making boundaries explicit (internet, cross-region, cross-AZ) and using effective rates.</p>
    <div class="btn-row" style="margin-top:12px">
      <a class="btn" href="/calculators/">All calculators</a>
      <a class="btn" href="/guides/networking-costs/">Guide: networking costs</a>
      <a class="btn" href="/guides/egress-costs/">Guide: egress costs</a>
      <a class="btn" href="/methodology/">Methodology</a>
    </div>
  </section>

  <section class="grid" style="margin-top:18px">
    <section class="card section prose col-6">
      <h2 style="margin-top:0">Start with boundaries</h2>
      <ul class="muted" style="margin:10px 0 0; padding-left:18px">
        <li>Internet egress (to the public internet)</li>
        <li>Cross-region transfer</li>
        <li>Cross-AZ / intra-region transfer</li>
        <li>CDN edge bandwidth vs origin egress (cache fill)</li>
      </ul>
    </section>
    <section class="card section prose col-6">
      <h2 style="margin-top:0">Common mistakes</h2>
      <ul class="muted" style="margin:10px 0 0; padding-left:18px">
        <li>Using CDN bandwidth as a proxy for origin egress (double-counting or missing cache fill).</li>
        <li>Mixing GB vs GiB or applying a single $/GB across multiple transfer paths.</li>
        <li>Ignoring retries/timeouts that multiply requests and bytes during incidents.</li>
      </ul>
    </section>
  </section>

  <section class="grid" style="margin-top:18px">
    <section class="card section prose col-6">
      <h2 style="margin-top:0">Quick workflow (get a defensible estimate)</h2>
      <ol class="muted" style="margin:10px 0 0; padding-left:18px">
        <li>Measure GB/month for each boundary (internet, cross-region, cross-AZ) from logs/metrics if possible.</li>
        <li>Pick an effective $/GB for each boundary (region and tier matter).</li>
        <li>Model a baseline month and a peak month (incidents and launches amplify traffic).</li>
      </ol>
    </section>
    <section class="card section prose col-6">
      <h2 style="margin-top:0">What to validate in billing</h2>
      <ul class="muted" style="margin:10px 0 0; padding-left:18px">
        <li>Which line item is the real driver (egress, inter-AZ, inter-region, NAT processed GB, endpoint-hours).</li>
        <li>Whether your estimate matches a representative month (then adjust assumptions, not the math).</li>
        <li>Whether caches and locality behave as intended (cache hit rate, AZ affinity, regional routing).</li>
      </ul>
    </section>
  </section>

  <section class="card section prose" style="margin-top:18px">
    <h2 style="margin-top:0">How to get your inputs</h2>
    <ul class="muted" style="margin:10px 0 0; padding-left:18px">
      <li><strong>Internet egress</strong>: CDN or load balancer bytes out, or billing usage types.</li>
      <li><strong>Cross-AZ</strong>: VPC flow logs summaries or provider transfer metrics.</li>
      <li><strong>Cross-region</strong>: replication/DR logs or billing export usage types.</li>
      <li><strong>Effective rates</strong>: use blended $/GB for each boundary, not a single rate.</li>
    </ul>
  </section>

  <section class="card section" style="margin-top:18px">
    <div class="muted" style="font-size:13px; margin-bottom:10px">{tools.length} networking tools</div>
    <div class="grid">
      {tools.map((t) => (
        <a class="card2 tool col-6" href={`/calculators/${t.slug}/`}>
          <div class="tool-title">{t.title}</div>
          <div class="tool-desc">{t.description}</div>
        </a>
      ))}
    </div>
  </section>

  <section class="card section prose" style="margin-top:18px">
    <h2 style="margin-top:0">Result interpretation</h2>
    <ul class="muted" style="margin:10px 0 0; padding-left:18px">
      <li>If egress dominates, check CDN cache hit rate and origin egress separately.</li>
      <li>If inter-AZ transfer dominates, review service locality and load balancer routing.</li>
      <li>If NAT or endpoint costs dominate, validate processed GB and endpoint-hours assumptions.</li>
      <li>Use a peak scenario for incident months; retries and timeouts change network spend fast.</li>
    </ul>
  </section>

  <section class="card section prose" style="margin-top:18px">
    <h2 style="margin-top:0">Scenario planning</h2>
    <ul class="muted" style="margin:10px 0 0; padding-left:18px">
      <li>Baseline: typical egress, inter-AZ, and cross-region volumes.</li>
      <li>Peak: 2x-4x traffic and higher retry rates during incidents.</li>
      <li>Cache shifts: model a lower cache hit rate for launch weeks.</li>
      <li>Route changes: re-evaluate when you add regions or new endpoints.</li>
    </ul>
  </section>

  <section class="card section prose" style="margin-top:18px">
    <h2 style="margin-top:0">Validate after changes</h2>
    <ul class="muted" style="margin:10px 0 0; padding-left:18px">
      <li>Verify boundary splits (internet, cross-AZ, cross-region) in billing exports.</li>
      <li>Check cache hit rates and origin egress after CDN changes.</li>
      <li>Review flow logs or transfer metrics after routing updates.</li>
    </ul>
  </section>

  <section class="section">
    <AdSlot slot={slots.calculatorsListMid} minHeight={280} />
  </section>
</BaseLayout>
