---
import CalculatorLayout from "../../layouts/CalculatorLayout.astro";
import { KubernetesRequestsLimitsCalculator as KubernetesRequestsLimitsCalculatorComponent } from "../../components/calculators/KubernetesRequestsLimits";

const title = "Kubernetes Requests & Limits Calculator";
const description =
  "Convert per-pod CPU/memory requests and limits into totals and estimate node count from allocatable capacity. Educational use only.";
---
<CalculatorLayout
  title={title}
  description={description}
  canonicalPath="/calculators/kubernetes-requests-limits-calculator"
  intro="Requests drive scheduling. This tool converts per-pod requests into cluster totals and estimates how many nodes you need for those requests given an allocatable overhead."
  examples={[
    "60 pods with 250m CPU and 512Mi requests -> estimate total requests and node count for an 8 vCPU / 32 GiB node.",
    "120 pods with 100m CPU and 256Mi requests -> see whether CPU or memory is the limiting factor.",
  ]}
  includes={[
    "Totals for CPU/memory requests and limits from per-pod values and pod count.",
    "Node count estimate based on allocatable percentage (headroom).",
  ]}
  excludes={[
    "Bin packing constraints (pods per node limits, affinities, taints) and daemonset overhead.",
    "Network, storage, and control plane costs.",
  ]}
  how={[
    "Total requests = pods x per-pod request (CPU and memory).",
    "Allocatable per node = node capacity x allocatable percentage.",
    "Node estimate uses the larger of CPU-based and memory-based counts."
  ]}
  faqs={[
    {
      q: "Why not size based on limits?",
      a: "Scheduling uses requests, not limits. Limits matter for bursting risk and potential throttling/OOM behavior."
    },
    {
      q: "What should I use for allocatable %?",
      a: "A common planning value is 85-95% depending on kubelet/system reservations, daemonsets, and headroom."
    },
    {
      q: "Does this include per-node overhead like daemonsets?",
      a: "Not explicitly. Use a lower allocatable % or increase requests to account for overhead."
    },
    {
      q: "What about cluster autoscaler and bin packing?",
      a: "This tool is a quick estimate. Real scheduling constraints (max pods per node, affinities, daemonsets) can increase node count. Treat the result as a floor and validate with real packing."
    },
    {
      q: "How do I turn this into a cost estimate?",
      a: "Use the resulting node count with the Kubernetes Node Cost Calculator, and add control plane, load balancers, storage, and observability costs separately."
    }
  ]}
  lastUpdated="2026-01-06"
  related={[
    { href: "/guides/kubernetes-cost-calculator", label: "Guide: Kubernetes cost calculator" },
    { href: "/guides/kubernetes-requests-limits", label: "Guide: requests & limits" },
    { href: "/guides/eks-vs-gke-vs-aks-cost", label: "EKS vs GKE vs AKS cost" },
    { href: "/calculators/kubernetes-node-cost-calculator", label: "Kubernetes node cost" },
    { href: "/calculators/compute-instance-cost-calculator", label: "Compute instance cost" },
  ]}
>
  <KubernetesRequestsLimitsCalculatorComponent client:load />
  <div class="prose" style="margin-top:18px">
    <h2 style="margin-top:0">How to get your inputs</h2>
    <ul>
      <li><strong>Inputs</strong>: use billing exports, metrics, or logs to get real counts/GB where possible.</li>
      <li><strong>Units</strong>: convert throughput (Mbps) or rates (RPS) into monthly units when needed.</li>
      <li><strong>Scenarios</strong>: build a baseline and a high-usage scenario to avoid under-budgeting.</li>
    </ul>

    <h2>Common mistakes</h2>
    <ul>
      <li>Using a single average and ignoring peak/incident scenarios.</li>
      <li>Double-counting or missing adjacent line items (transfer, logs, retries).</li>
    </ul>

    <h2>Validate after changes</h2>
    <ul>
      <li>Compare your estimate to the first real bill and adjust assumptions.</li>
      <li>Track the primary driver metric (requests/GB/count) over time.</li>
    </ul>

    <h2>Next steps</h2>
    <div class="btn-row" style="margin-top:0">
      <a class="btn" href="/guides/">Guides</a>
      <a class="btn" href="/calculators/">All calculators</a>
      <a class="btn" href="/guides/kubernetes-cost-calculator/">Guide: Kubernetes cost calculator</a>
      <a class="btn" href="/guides/kubernetes-requests-limits/">Guide: requests &amp; limits</a>
      <a class="btn" href="/guides/eks-vs-gke-vs-aks-cost/">EKS vs GKE vs AKS cost</a>
      <a class="btn" href="/calculators/kubernetes-node-cost-calculator/">Kubernetes node cost</a>
    </div>
  </div>
</CalculatorLayout>
