---
import CalculatorLayout from "../../layouts/CalculatorLayout.astro";
import { AwsEcsTaskSizingCalculator as AwsEcsTaskSizingCalculatorComponent } from "../../components/calculators/AwsEcsTaskSizing";

const title = "ECS Task Sizing Calculator (CPU & memory → task count)";
const description =
  "Estimate how many ECS tasks you need from average CPU (vCPU) and memory (GB) demand, per-task sizing, and a target utilization. Educational use only.";
---
<CalculatorLayout
  title={title}
  description={description}
  canonicalPath="/calculators/aws-ecs-task-sizing-calculator"
  intro="Estimate required ECS tasks from average resource demand. Enter total vCPU/memory needed, per-task vCPU/memory, and a target utilization to get a recommended task count."
  examples={[
    "If your service needs ~2 vCPU and ~4 GB on average, and each task is 0.5 vCPU / 1 GB at 70% utilization → estimate tasks.",
    "Use average demand, not peak. Add headroom for spikes and deployments.",
  ]}
  includes={[
    "Task count estimate from average vCPU and memory demand.",
    "Target utilization to keep headroom (planning).",
  ]}
  excludes={[
    "Pricing (use Fargate or EC2 pricing calculators after sizing).",
    "Load balancers, logs, networking, and storage.",
  ]}
  how={[
    "Effective capacity per task = per-task capacity x target utilization.",
    "Tasks by CPU = ceil(total vCPU needed / effective vCPU per task).",
    "Tasks by memory = ceil(total GB needed / effective GB per task).",
    "Recommended tasks = max(tasks by CPU, tasks by memory).",
  ]}
  faqs={[
    {
      q: "What should I use for total vCPU and memory needed?",
      a: "Use measured averages from monitoring (p50/p95 where relevant) and pick a realistic planning average. Don't size from peak-only numbers unless you also model autoscaling and scheduling.",
    },
    {
      q: "What target utilization should I use?",
      a: "Common planning values are 60-80% to keep headroom for bursts, deployments, and noisy neighbors.",
    },
    {
      q: "How do I convert tasks into cost?",
      a: "For ECS on Fargate, use the Fargate cost calculator (vCPU-hours + GB-hours). For ECS on EC2, estimate required instances and use the EC2 cost calculator.",
    },
  ]}
  lastUpdated="2026-01-21"
  related={[
    { href: "/guides/aws-ecs-task-sizing", label: "Guide: ECS task sizing" },
    { href: "/guides/aws-ecs-pricing", label: "Guide: ECS pricing" },
    { href: "/calculators/aws-fargate-cost-calculator", label: "Fargate cost calculator" },
    { href: "/calculators/ec2-cost-calculator", label: "EC2 cost calculator" },
    { href: "/calculators/aws-ecs-ec2-vs-fargate-cost-calculator", label: "ECS on EC2 vs Fargate (compare)" },
  ]}
>
  <AwsEcsTaskSizingCalculatorComponent client:load />
  <div class="prose" style="margin-top:18px">
    <h2 style="margin-top:0">How to get your inputs</h2>
    <ul>
      <li><strong>Inputs</strong>: use billing exports, metrics, or logs to get real counts/GB where possible.</li>
      <li><strong>Units</strong>: convert throughput (Mbps) or rates (RPS) into monthly units when needed.</li>
      <li><strong>Scenarios</strong>: build a baseline and a high-usage scenario to avoid under-budgeting.</li>
    </ul>

    <h2>Common mistakes</h2>
    <ul>
      <li>Using a single average and ignoring peak/incident scenarios.</li>
      <li>Double-counting or missing adjacent line items (transfer, logs, retries).</li>
    </ul>

    <h2>Validate after changes</h2>
    <ul>
      <li>Compare your estimate to the first real bill and adjust assumptions.</li>
      <li>Track the primary driver metric (requests/GB/count) over time.</li>
    </ul>

    <h2>Next steps</h2>
    <div class="btn-row" style="margin-top:0">
      <a class="btn" href="/guides/">Guides</a>
      <a class="btn" href="/calculators/">All calculators</a>
      <a class="btn" href="/guides/aws-ecs-task-sizing/">Guide: ECS task sizing</a>
      <a class="btn" href="/guides/aws-ecs-pricing/">Guide: ECS pricing</a>
      <a class="btn" href="/calculators/aws-fargate-cost-calculator/">Fargate cost calculator</a>
      <a class="btn" href="/calculators/ec2-cost-calculator/">EC2 cost calculator</a>
    </div>
  </div>
</CalculatorLayout>

